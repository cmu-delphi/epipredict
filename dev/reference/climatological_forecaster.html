<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Climatological forecaster — climatological_forecaster • epipredict</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Open_Sans-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Serif_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Climatological forecaster — climatological_forecaster"><meta name="description" content='This is another "baseline" type forecaster, but it is especially appropriate
for strongly seasonal diseases (e.g., influenza). The idea is to predict
the "typical season" by summarizing over all available history in the
epi_data. This is analogous to a "climate" forecast rather than a "weather"
forecast, essentially predicting "typical January" behavior by relying on a
long history of such periods rather than heavily using recent data.'><meta property="og:description" content='This is another "baseline" type forecaster, but it is especially appropriate
for strongly seasonal diseases (e.g., influenza). The idea is to predict
the "typical season" by summarizing over all available history in the
epi_data. This is analogous to a "climate" forecast rather than a "weather"
forecast, essentially predicting "typical January" behavior by relying on a
long history of such periods rather than heavily using recent data.'><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epipredict</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.1.15</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/epipredict.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/custom_epiworkflows.html">Epiworkflows</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/backtesting.html">Backtesting</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/update.html">Using the add/update/remove/adjust functions</a></li>
    <li><a class="dropdown-item" href="../articles/panel-data.html">Using epipredict on non-epidemic panel data</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/cmu-delphi/epipredict/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Climatological forecaster</h1>
      <small class="dont-index">Source: <a href="https://github.com/cmu-delphi/epipredict/blob/dev/R/climatological_forecaster.R" class="external-link"><code>R/climatological_forecaster.R</code></a></small>
      <div class="d-none name"><code>climatological_forecaster.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is another "baseline" type forecaster, but it is especially appropriate
for strongly seasonal diseases (e.g., influenza). The idea is to predict
the "typical season" by summarizing over all available history in the
<code>epi_data</code>. This is analogous to a "climate" forecast rather than a "weather"
forecast, essentially predicting "typical January" behavior by relying on a
long history of such periods rather than heavily using recent data.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">climatological_forecaster</span><span class="op">(</span><span class="va">epi_data</span>, <span class="va">outcome</span>, args_list <span class="op">=</span> <span class="fu"><a href="climate_args_list.html">climate_args_list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-epi-data">epi_data<a class="anchor" aria-label="anchor" href="#arg-epi-data"></a></dt>
<dd><p>An <a href="https://cmu-delphi.github.io/epiprocess/reference/epi_df.html" class="external-link">epiprocess::epi_df</a></p></dd>


<dt id="arg-outcome">outcome<a class="anchor" aria-label="anchor" href="#arg-outcome"></a></dt>
<dd><p>A scalar character for the column name we wish to predict.</p></dd>


<dt id="arg-args-list">args_list<a class="anchor" aria-label="anchor" href="#arg-args-list"></a></dt>
<dd><p>A list of additional arguments as created by the
<code><a href="climate_args_list.html">climate_args_list()</a></code> constructor function.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame of point and interval) forecasts at a all horizons
for each unique combination of <code>key_vars</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The point forecast is either the mean or median of the <code>outcome</code> in a small
window around the target period, computed over the entire available history,
separately for each key in the <code>epi_df</code> (<code>geo_value</code> and any additional keys).
The forecast quantiles are computed from the residuals for this point prediction.
By default, the residuals are ungrouped, meaning every key will have the same
shape distribution (though different centers). Note that if your data is not
or comparable scales across keys, this default is likely inappropriate. In that
case, you can choose by which keys quantiles are computed using
<code>climate_args_list(quantile_by_key = ...)</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="step_climate.html">step_climate()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">cases</span> <span class="op">&lt;-</span> <span class="va">cases_deaths_subset</span></span></span>
<span class="r-in"><span><span class="co"># set as_of to the last day in the data</span></span></span>
<span class="r-in"><span><span class="co"># "case_rate_7d_av" is on the same scale for all geographies</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">cases</span>, <span class="st">"metadata"</span><span class="op">)</span><span class="op">$</span><span class="va">as_of</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-12-31"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fcast</span> <span class="op">&lt;-</span> <span class="fu">climatological_forecaster</span><span class="op">(</span><span class="va">cases</span>, <span class="st">"case_rate_7d_av"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">fcast</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="climatological_forecaster-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compute quantiles separately by location, and a backcast</span></span></span>
<span class="r-in"><span><span class="co"># "cases" is on different scales by geography, due to population size</span></span></span>
<span class="r-in"><span><span class="co"># so, it is better to compute quantiles separately</span></span></span>
<span class="r-in"><span><span class="va">backcast</span> <span class="op">&lt;-</span> <span class="fu">climatological_forecaster</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">cases</span>, <span class="st">"case_rate_7d_av"</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="climate_args_list.html">climate_args_list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    quantile_by_key <span class="op">=</span> <span class="st">"geo_value"</span>,</span></span>
<span class="r-in"><span>    forecast_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-06-01"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">backcast</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="climatological_forecaster-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># compute the climate "daily" rather than "weekly"</span></span></span>
<span class="r-in"><span><span class="co"># use a two week window (on both sides)</span></span></span>
<span class="r-in"><span><span class="co"># "cases" is on different scales by geography, due to population size</span></span></span>
<span class="r-in"><span><span class="va">daily_fcast</span> <span class="op">&lt;-</span> <span class="fu">climatological_forecaster</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">cases</span>, <span class="st">"cases"</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="climate_args_list.html">climate_args_list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    quantile_by_key <span class="op">=</span> <span class="st">"geo_value"</span>,</span></span>
<span class="r-in"><span>    time_type <span class="op">=</span> <span class="st">"day"</span>,</span></span>
<span class="r-in"><span>    window_size <span class="op">=</span> <span class="fl">14L</span>,</span></span>
<span class="r-in"><span>    forecast_horizon <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">30</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">daily_fcast</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-10-01"</span><span class="op">)</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="climatological_forecaster-3.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p><a href="https://delphi.cmu.edu/about/" class="external-link">About Delphi</a> • <a href="https://delphi.cmu.edu/epidemic-signals/terms-of-use/" class="external-link">Terms of Use</a> • <a href="https://docs.google.com/forms/u/1/d/e/1FAIpQLScqgT1fKZr5VWBfsaSp-DNaN03aV6EoZU4YljIzHJ1Wl_zmtg/viewform" class="external-link">Contact Us</a> • <a href="https://github.com/cmu-delphi/" class="external-link">Delphi GitHub</a> • <a href="https://cmu-delphi.github.io/delphi-epidata/" class="external-link">Epidata API</a></p>
</div>

<div class="pkgdown-footer-right">
  <p>epipredict</p>
</div>

    </footer></div>





  </body></html>

